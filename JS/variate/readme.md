# 变量、作用域和内存问题
## 变量
1. 变量
    - 基本类型是指简单的数据类型
    - 引用类型是指哪些可能有多个值构成的对象，可以为其添加属性和方法，也可以删除属性和方法
2. 复制变量值
    - 对于基本类型的复制，会在内存上创建一个新的变量，将值复制到此处
    - 对于引用类型，也是如此，但是不同的是，这个值是一个指针。两个变量会引用同一个对象
3. 传递参数
    - 所有函数的参数都是按值传递的，如果是引用类型，那么传递进去的是该类型的地址，这样形参也会引用同一个对象，但是修改形参指的位置不会影响传入进去的对象
4. 类型检测 instanceof 检测是什么类型的对象
    - 如果变量是给定引用类型的实例，那么返回true
    - 如果是基本类型，则始终返回false，因为基本类型不是对象
## 执行环境及作用域
1. 执行环境
    - 定义了变量或函数有权访问的其他数据，决定了它们各自的行为，每个执行环境都有与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象中
    - 在web浏览器中，全局执行环境被认为是window对象
    - 每个函数都有自己的执行环境，当执行进入一个函数时，函数的环境就会被推入一个环境栈中，执行结束后，栈将其弹出
    - 代码在一个环境中执行时，会创建变量对象的一个作用域链，保证了有序访问所有变量和函数
    - 内部环境可以通过作用域链访问所有外部环境，但外部环境不能访问内部环境中的任何变量和函数
2. 声明变量
    - 使用var 声明的变量会自动被添加到最接近的环境中
    - 初始化变量没有使用var则被自动添加到全局环境
## 垃圾收集
1. 存在自动垃圾收集机制
    - 找出哪些不再继续使用的变量，然后释放占用的内存
    - 垃圾收集器必须跟踪哪个变量有用哪个变量没有用，以备将来收回其占用的内存
2. 标记清除
    - 当变量进入环境时，就标记为“进入环境”，但变量离开环境时，标记为“离开环境”
3. 引用计数
    - 跟踪记录每个值被引用的次数，但是有个严重问题：循环引用，为了避免，最好是手工断开
4. 管理内存
    - 一旦数据不再用，最好通过将其值设置为null来释放其引用