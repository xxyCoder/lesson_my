<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        let obj = {};
        let arr = [1, 2, 3];
        console.log(arr[Symbol.iterator], obj[Symbol.iterator]);

        class FooArray extends Array { }
        let fooArr = new FooArray('foo', 'bar', 'baz');
        for (let el of fooArr) {
            console.log(el);
        }

        let iter1 = arr[Symbol.iterator]();
        let iter2 = arr[Symbol.iterator]();
        console.log(iter1 == iter2);
        console.log(iter1.next());

        class Counter {
            constructor(limit = 0) {
                this.count = 1;
                this.limit = limit;
            }
            next() {
                if (this.count <= this.limit) {
                    return {
                        done: false,
                        value: this.count++
                    }
                }
                else {
                    return {
                        done: true,
                        value: undefined
                    }
                }
            }
            [Symbol.iterator]() {
                return this;
            }
        }
        let counter = new Counter(3);
        for (let i of counter) {
            console.log(i);
        }
        console.log(counter[Symbol.iterator]());

        class newCounter {
            constructor(limit) {
                this.limit = limit;
            }
            [Symbol.iterator]() {
                let count = 1, limit = this.limit;
                return {
                    next() {
                        if (count <= limit) {
                            return {
                                done: false,
                                value: count++
                            };
                        }
                        else {
                            return {
                                done: true,
                                value: undefined
                            };
                        }
                    },
                    return() {
                        console.log('Exitingearly');
                        return {
                            done: true
                        };
                    }
                }
            }
        }
        let count1 = new newCounter(3);
        for (let i of count1) {
            console.log(i);
            if(i > 1) {
                break;
            }
        }
        for(let i of count1) {
            console.log(i);
        }

        iter2.return = function() {
            console.log('break');
            return {
                done: true
            }
        }
        for(let i of iter2) {
            console.log(i);
            if(i > 1) {
                // console.log('break');
                break;
            }
        }
        for(let i of iter2) {
            console.log(i);
        }

        function* generatorFn() {
            console.log('开始执行代码');
            yield 'stop';
            return 'generatorFn';   // 不给值则value = undefined
        };
        let GeneratorFn = function * () {};
        class Foo {
            * generatorFn() {}
        };
        class Bar {
            static * generatorFn() {}
        };

        let gfn = generatorFn();
        console.log(gfn,gfn.next());
        console.log(gfn.next());
    </script>
</body>

</html>